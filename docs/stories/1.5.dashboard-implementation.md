# <!-- Powered by BMAD™ Core -->

# Story 1.5: Dashboard Implementation

## Status
Draft

## Story
**As a** user,  
**I want** to see a dashboard that summarizes important information when I open the app,  
**so that** I know what to focus on immediately.

## Acceptance Criteria
1. หน้า Dashboard แสดงข้อมูลสรุปที่ดึงมาจากข้อมูลจำลอง (เช่น จำนวนงานใหม่, งานด่วน)
2. ข้อมูลบน Dashboard มีความถูกต้องตรงกับข้อมูลจำลองที่มีอยู่

## Tasks / Subtasks
- [ ] Task 1: Create Dashboard Page component (AC: 1, 2)
  - [ ] Create `DashboardPage` component in apps/web/src/pages/
  - [ ] Design dashboard layout with cards/widgets
  - [ ] Use shadcn/ui Card components for consistent styling
  - [ ] Ensure responsive grid layout for different screen sizes
- [ ] Task 2: Create dashboard metrics service (AC: 1, 2)
  - [ ] Create dashboard service in apps/web/src/services/
  - [ ] Calculate metrics from dummy data: total customers, total jobs, jobs by status
  - [ ] Add derived metrics: new jobs (last 7 days), urgent jobs (In Progress status)
  - [ ] Ensure real-time updates when data changes
- [ ] Task 3: Implement key metrics cards (AC: 1)
  - [ ] Total Customers card with count and icon
  - [ ] Total Jobs card with count and icon  
  - [ ] New Jobs card (jobs with 'New' status)
  - [ ] Jobs In Progress card (jobs that need attention)
  - [ ] Use consistent card design with shadcn/ui
- [ ] Task 4: Add quick action buttons (AC: 1)
  - [ ] "เพิ่มลูกค้าใหม่" quick action button
  - [ ] "สร้างงานใหม่" quick action button
  - [ ] Connect to same modals/forms as in list pages
  - [ ] Position prominently on dashboard for easy access
- [ ] Task 5: Set up dashboard as default route (AC: 1)
  - [ ] Configure router to show Dashboard on root path "/"
  - [ ] Update sidebar navigation to highlight Dashboard when active
  - [ ] Ensure Dashboard loads as first page after app startup
- [ ] Task 6: Add recent activity section (AC: 1)
  - [ ] Show 5 most recent jobs (sorted by created_at)
  - [ ] Display job description, customer name, and status
  - [ ] Make items clickable to navigate to job detail
  - [ ] Use compact list design for space efficiency
- [ ] Task 7: Testing and data integration (AC: 2)
  - [ ] Create unit tests for Dashboard component and service
  - [ ] Test metric calculations with various data scenarios
  - [ ] Verify dashboard updates when underlying data changes
  - [ ] Test responsive behavior and navigation

## Dev Notes

### Previous Story Insights
Stories 1.1-1.4 establish the data management foundation. Dashboard provides the overview/summary interface that brings everything together for quick user orientation.

### Business Context and Metrics
[Source: prd/requirements.md#FR4]
Dashboard must show "ข้อมูลสำคัญทางธุรกิจ" with focus on:
- รายการงานใหม่ (New jobs) - immediate attention needed
- งานที่ต้องติดตามด่วน (Urgent jobs) - In Progress status jobs

### Data Models for Dashboard Calculations  
[Source: architecture/data-models.md]

```ts
// Dashboard will calculate from these models
interface Customer {
  id: string;
  created_at: string;  // For counting recent customers
  name: string;
  email: string;
  phone: string;
}

interface Job {
  id: string;
  created_at: string;     // For recent activity and new job counts
  customer_id: string;
  description: string;
  status: 'New' | 'In Progress' | 'Done';  // For status-based metrics
  customers?: Customer;   // For displaying customer names
}

// Dashboard metrics interface
interface DashboardMetrics {
  totalCustomers: number;
  totalJobs: number;
  newJobs: number;        // status = 'New'
  jobsInProgress: number; // status = 'In Progress'
  recentJobs: Job[];      // Last 5 jobs by created_at
}
```

### Tech Stack Requirements
[Source: architecture/tech-stack.md]
- **Frontend Language**: TypeScript ~5.x
- **Frontend Framework**: React ~18.x
- **UI Component Library**: shadcn/ui - Card, Badge, Button components
- **CSS Framework**: Tailwind CSS ~3.x - for responsive grid layout
- **State Management**: React Context API - for accessing dummy data
- **Icons**: Lucide React (comes with shadcn/ui) for metric icons

### Project Structure Requirements  
[Source: architecture/unified-project-structure.md]
**Component Locations**:
- Dashboard page: `/apps/web/src/pages/DashboardPage.tsx`
- Dashboard service: `/apps/web/src/services/dashboardService.ts`
- Shared types: `/packages/shared/types.ts`

### UI/UX Design Requirements
[Source: prd/user-interface-design-goals.md]
- **Design Philosophy**: "Effortless" - instant understanding of key information
- **Layout Pattern**: Card-based grid layout that adapts to screen size
- **Information Hierarchy**: Most important metrics prominently displayed
- **Visual Design**: Clean cards using shadcn/ui default styling
- **Quick Actions**: Prominent buttons for common tasks

### Dashboard Layout Strategy
- **Desktop Layout**: 4-column grid for metric cards, 2-column for content sections
- **Tablet Layout**: 2-column grid adapting to smaller screen
- **Mobile Layout**: Single column stack layout
- **Card Design**: Consistent shadcn/ui Card with header, content, and optional footer

### Navigation Integration  
- Dashboard should be default route ("/") 
- "Dashboard" menu item in sidebar should show active state when on dashboard
- Quick action buttons should open same forms as list pages (maintain consistency)
- Recent activity items should navigate to job detail pages

### Data Integration Strategy
[Source: prd/requirements.md#NFR5]
- Use dummy data service as single source of truth
- Calculate metrics on-demand (acceptable for MVP size)
- Dashboard should react to data changes from CRUD operations
- Prepare structure for real-time updates when API integration happens

### Environment Configuration Standards
[Source: architecture/coding-standards.md]  
- **Type Sharing**: Import interfaces from `packages/shared/types.ts`
- **Data Access**: Use consistent patterns with other components
- **Component Structure**: Follow established patterns from previous stories

### Testing Requirements
[Source: architecture/tech-stack.md]
- **Testing Framework**: Vitest + React Testing Library
- **Dashboard Testing**: Test metric calculations and display
- **Data Service Testing**: Test dashboard service with various data scenarios
- **Navigation Testing**: Test quick actions and recent activity navigation
- **Responsive Testing**: Verify layout works on different screen sizes

### Accessibility Requirements
[Source: prd/user-interface-design-goals.md#accessibility]
- **Metrics Cards**: Proper heading structure and semantic markup
- **Quick Actions**: Accessible button labels and keyboard navigation  
- **Recent Activity**: Proper list markup and keyboard navigation
- **Screen Reader**: Meaningful content descriptions for metrics

### File Locations
Based on project structure, create files at:
- Dashboard page: `/apps/web/src/pages/DashboardPage.tsx`
- Dashboard service: `/apps/web/src/services/dashboardService.ts`
- Dashboard test: `/apps/web/src/pages/DashboardPage.test.tsx`
- Service test: `/apps/web/src/services/dashboardService.test.ts`

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 30/08/2025 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be populated by dev agent*

### Debug Log References  
*To be populated by dev agent*

### Completion Notes List
*To be populated by dev agent*

### File List
*To be populated by dev agent*

## QA Results
*Results from QA Agent review will be populated here*